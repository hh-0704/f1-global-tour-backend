# F1 Global Tour Backend - κµ¬ν„ ν„ν™©

## π“ μ „μ²΄ μ§„ν–‰λ¥ : **Phase 1 μ™„λ£ (35%)**

---

## β… Phase 1: ν•µμ‹¬ κΈ°λ¥ κµ¬ν„ (100% μ™„λ£)

### π”§ **HTTP ν΄λΌμ΄μ–ΈνΈ μ‹μ¤ν…**
- β… `OpenF1ClientService` κµ¬ν„ μ™„λ£
  - λ¨λ“  OpenF1 API μ—”λ“ν¬μΈνΈ μ§€μ› (7κ°)
  - κ°•λ ¥ν• μ—λ¬ μ²λ¦¬ λ° λ΅κΉ…
  - νƒ€μ… μ•μ „μ„± λ³΄μ¥
- β… Query Parameters μΈν„°νμ΄μ¤ μ™„λΉ„
- β… CommonModule ν†µν•©

**νμΌ**: 
- `src/common/services/openf1-client.service.ts`
- `src/common/interfaces/query-params.interface.ts`

### π—„οΈ **Redis μΊμ‹± μ‹μ¤ν…**
- β… `CacheService` κµ¬ν„ μ™„λ£
  - Redis μ—°κ²° κ΄€λ¦¬ λ° μλ™ μ¬μ—°κ²°
  - μ„Έμ… κΈ°λ° μΊμ‹ ν‚¤ μƒμ„±
  - TTL μ •μ±… λ° ν†µκ³„ κΈ°λ¥
- β… `CachedOpenF1ClientService` κµ¬ν„ μ™„λ£
  - μ¤λ§νΈ μΊμ‹± λ μ΄μ–΄
  - μ°¨λ³„ν™”λ TTL μ „λµ
  - λ¦¬ν”λ μ΄ λ°μ΄ν„° ν”„λ¦¬λ΅λ”©
- β… μΊμ‹ λ¬΄ν¨ν™” λ° ν¨ν„΄ μ‚­μ  κΈ°λ¥

**νμΌ**:
- `src/common/services/cache.service.ts`
- `src/common/services/cached-openf1-client.service.ts`

### π― **Sessions λ¨λ“ μ™„μ„±**
- β… OpenF1 API μ—°λ™ μ™„λ£
- β… μΊμ‹± μ‹μ¤ν… ν†µν•©
- β… λ¦¬ν”λ μ΄ μ‹μ‘ μ‹ λ°μ΄ν„° ν”„λ¦¬λ΅λ”©
- β… ν–¥μƒλ μ—λ¬ μ²λ¦¬ λ° μ‘λ‹µ ν•μ‹

**νμΌ**:
- `src/modules/sessions/sessions.service.ts`
- `src/modules/sessions/sessions.module.ts`

### π–¥οΈ **μ„λ²„ μΈν”„λΌ**
- β… NestJS μ• ν”λ¦¬μΌ€μ΄μ… μ •μƒ μ‹¤ν–‰
- β… ν¬νΈ 4000μ—μ„ μ„λΉ„μ¤ μ κ³µ
- β… API λΌμ°νΈ λ§¤ν•‘ μ™„λ£
- β… λ¨λ“  λ¨λ“ μμ΅΄μ„± ν•΄κ²°

**ν„μ¬ API μ—”λ“ν¬μΈνΈ**:
```
GET  /api/v1/sessions
GET  /api/v1/sessions/:sessionKey/drivers  
POST /api/v1/sessions/:sessionKey/start-replay
```

---

## π§ Phase 2: λ°μ΄ν„° λ³€ν™ λ° κ³ κΈ‰ κΈ°λ¥ (0% μ§„ν–‰)

### π”„ **λ°μ΄ν„° λ³€ν™ λ΅μ§**
- β³ DRS λ³€ν™κΈ° (DRS κ°’ β†’ boolean)
- β³ μ„Έκ·Έλ¨ΌνΈ λ³€ν™κΈ° (μ½”λ“ β†’ μƒ‰μƒ λ§¤ν•‘)
- β³ DNF μ²λ¦¬ (null lap_duration)
- β³ Pit Lane κ°μ§€ (μ„Έκ·Έλ¨ΌνΈ 2064)

### π“¦ **μ¶”κ°€ λ¨λ“ κµ¬ν„**
- β³ Drivers λ¨λ“
- β³ Laps λ¨λ“  
- β³ CarData λ¨λ“ (ν…”λ λ©”νΈλ¦¬)
- β³ Intervals λ¨λ“
- β³ RaceControl λ¨λ“
- β³ Stints λ¨λ“

### π›΅οΈ **μ—λ¬ μ²λ¦¬ κ°•ν™”**
- β³ Circuit Breaker ν¨ν„΄
- β³ Fallback λ°μ΄ν„° μ κ³µ
- β³ ν‘μ¤€ν™”λ μ—λ¬ μ½”λ“

---

## π”® Phase 3: μ™„μ„± λ° μµμ ν™” (0% μ§„ν–‰)

### π“ **μ„±λ¥ μµμ ν™”**
- β³ λ°μ΄ν„° μ••μ¶• (gzip)
- β³ λ³‘λ ¬ API νΈμ¶ μµμ ν™”
- β³ ν…”λ λ©”νΈλ¦¬ λ°μ΄ν„° μ²­ν‚Ή

### π“ **λ¨λ‹ν„°λ§ & λ΅κΉ…**
- β³ Winston λ΅κ±° ν†µν•©
- β³ API μ‘λ‹µ μ‹κ°„ λ©”νΈλ¦­
- β³ ν—¬μ¤μ²΄ν¬ μ—”λ“ν¬μΈνΈ

### π€ **λ°°ν¬ μ¤€λΉ„**
- β³ Docker μ»¨ν…μ΄λ„ν™”
- β³ ν™κ²½λ³„ μ„¤μ • λ¶„λ¦¬
- β³ CI/CD νμ΄ν”„λΌμΈ

---

## π― **ν•µμ‹¬ μ•„ν‚¤ν…μ² κµ¬μ„±μ”μ†**

### **μ„λΉ„μ¤ λ μ΄μ–΄**
```typescript
OpenF1ClientService          // β… HTTP API ν΄λΌμ΄μ–ΈνΈ
  β†“
CachedOpenF1ClientService    // β… μΊμ‹± λ μ΄μ–΄  
  β†“
SessionsService              // β… λΉ„μ¦λ‹μ¤ λ΅μ§
  β†“
SessionsController           // β… REST API
```

### **λ°μ΄ν„° ν”λ΅μ°**
```
ν”„λ΅ νΈμ—”λ“ μ”μ²­ 
  β†“
SessionsController 
  β†“
SessionsService
  β†“
CachedOpenF1ClientService (μΊμ‹ ν™•μΈ)
  β†“
OpenF1ClientService (API νΈμ¶) 
  β†“
OpenF1 API
```

### **μΊμ‹ μ „λµ**
```
μ„Έμ… κΈ°λ° ν‚¤ ν¨ν„΄:
- session:9134:drivers     (TTL: 30λ¶„)
- session:9134:laps        (TTL: 15λ¶„) 
- session:9134:intervals   (TTL: 5λ¶„)
- session:9134:driver:1:telemetry (TTL: 10λ¶„)
```

---

## π”¥ **λ‹¤μ μ°μ„ μμ„**

### **μ¦‰μ‹ κµ¬ν„ κ°€λ¥**
1. **λ°μ΄ν„° λ³€ν™ λ΅μ§**: OpenF1 API μ‘λ‹µμ„ ν”„λ΅ νΈμ—”λ“ μΉν™”μ μΌλ΅ λ³€ν™
2. **Drivers λ¨λ“**: λ“λΌμ΄λ²„λ³„ μƒμ„Έ μ •λ³΄ λ° ν…”λ λ©”νΈλ¦¬
3. **Laps λ¨λ“**: λ©νƒ€μ„, μ„Ήν„° νƒ€μ„, μ„Έκ·Έλ¨ΌνΈ λ°μ΄ν„°

### **μ¤‘κΈ° λ©ν‘**  
1. **Circuit Breaker**: OpenF1 API μ¥μ•  λ€μ‘
2. **μ¶”κ°€ λ¨λ“**: CarData, Intervals, RaceControl, Stints
3. **μ„±λ¥ μµμ ν™”**: μ••μ¶•, λ³‘λ ¬ μ²λ¦¬

---

## π‰ **μ£Όμ” μ„±κ³Ό**

- **κ²¬κ³ ν• κΈ°λ°**: HTTP ν΄λΌμ΄μ–ΈνΈ + Redis μΊμ‹± μ™„μ„±
- **ν™•μ¥ κ°€λ¥ μ•„ν‚¤ν…μ²**: μƒ λ¨λ“ μ¶”κ°€ μ©μ΄
- **μ΄μ μ¤€λΉ„**: μ„λ²„ μ‹¤ν–‰ λ° API μ κ³µ κ°€λ¥
- **νƒ€μ… μ•μ „μ„±**: λ¨λ“  OpenF1 API μΈν„°νμ΄μ¤ μ •μ μ™„λ£
- **μΊμ‹± μµμ ν™”**: λ¦¬ν”λ μ΄ μ„±λ¥ λ€ν­ ν–¥μƒ μμƒ

**Phase 1μ μ„±κ³µμ  μ™„λ£**λ΅ F1 λ¦¬ν”λ μ΄ λ°±μ—”λ“μ ν•µμ‹¬ μΈν”„λΌκ°€ κµ¬μ¶•λμ—μµλ‹λ‹¤! ποΈβ¨